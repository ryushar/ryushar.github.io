2:"$Sreact.suspense"
4:I[5613,[],""]
6:I[1778,[],""]
7:I[5250,["250","static/chunks/250-9adc86b317d2997d.js","749","static/chunks/749-f9bac42e233c7f2e.js","571","static/chunks/571-1b738d9151a3b1d6.js","308","static/chunks/app/blog/%5Bslug%5D/page-657f61cef65c65b1.js"],""]
8:I[449,["601","static/chunks/app/error-bea17ad1465b70cc.js"],""]
5:["slug","how-ryuten-renders-particles","d"]
0:["9MKctz5Mkwp35f_aAppx4",[[["",{"children":["blog",{"children":[["slug","how-ryuten-renders-particles","d"],{"children":["__PAGE__?{\"slug\":\"how-ryuten-renders-particles\"}",{}]}]}]},"$undefined","$undefined",true],["",{"children":["blog",{"children":[["slug","how-ryuten-renders-particles","d"],{"children":["__PAGE__",{},["$L1",["$","section",null,{"children":[["$","script",null,{"type":"application/ld+json","suppressHydrationWarning":true,"dangerouslySetInnerHTML":{"__html":"{\"@context\":\"https://schema.org\",\"@type\":\"BlogPosting\",\"headline\":\"Rendering particles in ryuten.io\",\"datePublished\":\"2024-04-12\",\"dateModified\":\"2024-04-12\",\"description\":\"How I optimised the rendering of particle element in ryuten.io\",\"image\":\"https://ryushar.github.io/og?title=Rendering particles in ryuten.io\",\"url\":\"https://ryushar.github.io/blog/how-ryuten-renders-particles\",\"author\":{\"@type\":\"Person\",\"name\":\"Lee Robinson\"}}"}}],["$","h1",null,{"className":"title font-medium text-2xl tracking-tighter max-w-[650px]","children":"Rendering particles in ryuten.io"}],["$","div",null,{"className":"flex justify-between items-center mt-2 mb-8 text-sm max-w-[650px]","children":["$","$2",null,{"fallback":["$","p",null,{"className":"h-5"}],"children":["$","p",null,{"className":"text-sm text-neutral-600 dark:text-neutral-400","children":"April 12, 2024 (1d ago)"}]}]}],["$","article",null,{"className":"prose prose-quoteless prose-neutral dark:prose-invert","children":"$L3"}]]}],null]]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children","$5","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/054ea9f0cbab828b.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children","blog","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","html",null,{"lang":"en","className":"text-black bg-white dark:text-white dark:bg-[#111010] __variable_ac79ff __variable_8a4d12","children":[["$","head",null,{"children":["$","link",null,{"rel":"icon","href":"/favicon.png","sizes":"any"}]}],["$","body",null,{"className":"antialiased max-w-2xl mb-40 flex flex-col md:flex-row mx-4 mt-8 lg:mx-auto","children":["$","main",null,{"className":"flex-auto min-w-0 mt-6 flex flex-col px-2 md:px-0","children":[["$","aside",null,{"className":"-ml-[8px] mb-16 tracking-tight","children":["$","div",null,{"className":"lg:sticky lg:top-20","children":["$","nav",null,{"className":"flex flex-row items-start relative px-0 pb-0 fade md:overflow-auto scroll-pr-6 md:relative","id":"nav","children":["$","div",null,{"className":"flex flex-row space-x-0 pr-10","children":[["$","$L7","/",{"href":"/","className":"transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2","children":"home"}],["$","$L7","/blog",{"href":"/blog","className":"transition-all hover:text-neutral-800 dark:hover:text-neutral-200 flex align-middle relative py-1 px-2","children":"blog"}]]}]}]}]}],["$","$L4",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$8","errorStyles":[],"errorScripts":[],"template":["$","$L6",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"styles":null}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c25d5822630694b2.css","precedence":"next","crossOrigin":""}]],"$L9"]]]]
a:I[1749,["250","static/chunks/250-9adc86b317d2997d.js","749","static/chunks/749-f9bac42e233c7f2e.js","571","static/chunks/571-1b738d9151a3b1d6.js","308","static/chunks/app/blog/%5Bslug%5D/page-657f61cef65c65b1.js"],"Image"]
3:[["$","p",null,{"children":["There are many different type of elements in ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://ryuten.io","children":"Ryuten"}],", one of them being the particle type. And sometimes, there can be thousands of these particles visible to a player."]}],"\n",["$","$La",null,{"alt":"Ryuten.io","className":"rounded-lg","src":"/content/ryuten-particle-rendering-hero.png","width":2055,"height":1197}],"\n",["$","p",null,{"children":["Under the hood, Ryuten uses ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://pixijs.com/","children":"Pixi.js"}]," for rendering the game visuals. Pixi.js is a\r\nfree, open-source 2D rendering system that can be used to create interactive graphics,\r\nHTML5 games, and animated websites. It provides an easy to use API which helps\r\nin speeding up the development process (compared to writing raw WebGL code)."]}],"\n",["$","p",null,{"children":["In version 5, Pixi.js released the support for a ",["$","a",null,{"target":"_blank","rel":"noopener noreferrer","href":"https://medium.com/goodboy-digital/pixijs-v5-lands-5e112d84e510","children":"mid-level API"}],". This feature gives us a lot more control and allows us to write even more performant code for certain sections of the game."]}],"\n",["$","h3",null,{"id":"a-very-simple-expanation-of-how-webgl-renders-stuff","children":[[["$","a","link-a-very-simple-expanation-of-how-webgl-renders-stuff",{"href":"#a-very-simple-expanation-of-how-webgl-renders-stuff","className":"anchor"}]],"A very simple expanation of how WebGL renders stuff"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"You provide some vertices"}],"\n",["$","li",null,{"children":"These vertices are processed and then used to create primitives"}],"\n",["$","li",null,{"children":"These primitives are then rasterised into fragments"}],"\n",["$","li",null,{"children":"Each pixel in the fragment is then processed to output the final pixel data"}],"\n"]}],"\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/how-webgl-works-simplified.png","width":2937,"height":939}],"\n",["$","h3",null,{"id":"rendering-particles-using-pixijs-normally","children":[[["$","a","link-rendering-particles-using-pixijs-normally",{"href":"#rendering-particles-using-pixijs-normally","className":"anchor"}]],"Rendering particles using Pixi.js normally"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Pixi.js uses 2 triangles to create a rectangle shaped mesh having 4 vertices and then overlays it with a texture."}],"\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-rendering-1.png","width":256,"height":256}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Let us assume that we are rendering 50px x 50px particle."}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Pixel count = 50 * 50 = 2500 pixels in total"}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"So, the vertex shader deals with 4 vertices and the fragment shader deals with 2.5k pixels."}],"\n"]}],"\n"]}],"\n",["$","h3",null,{"id":"rendering-with-pixijs-normally-vs-using-the-low-level-api","children":[[["$","a","link-rendering-with-pixijs-normally-vs-using-the-low-level-api",{"href":"#rendering-with-pixijs-normally-vs-using-the-low-level-api","className":"anchor"}]],"Rendering with PIXI.JS normally vs using the low level API"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Since we have more control using the mid-level API, instead of a rectangle we are going to use a hexagon i.e, 4 triangles and 6 vertices."}],"\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-rendering-2.png","width":256,"height":256}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Let us assume that we are rendering 50px x 50px particle."}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"Pixel count = ((3 x √3) / 2) x (25 x 25) = ~1624 pixels in total"}],"\n"]}],"\n",["$","li",null,{"children":["\n",["$","p",null,{"children":"This time, the vertex shader has to deal with 6 vertices and the fragment shader deals with 1.6k pixels."}],"\n"]}],"\n"]}],"\n",["$","p",null,{"children":["$","em",null,{"children":"Note: No texture clipping takes place while rendering the partice as in this case, there is always extra headroom available in the texture due to some reasons related to mipmapping."}]}],"\n",["$","h3",null,{"id":"comparision","children":[[["$","a","link-comparision",{"href":"#comparision","className":"anchor"}]],"Comparision"]}],"\n",["$","ul",null,{"children":["\n",["$","li",null,{"children":"While the vertices increased by a small count of 2, the pixels decreased from 2.5k to 1.6k (roughy 36% decrement)"}],"\n",["$","li",null,{"children":"Since there didn’t seem to be an accurate way available to measure the GPU stats, I decided to disable v-sync and remove FPS limit from the browser and let it render as many frames per second as possible using both the methods."}],"\n",["$","li",null,{"children":["With the normal method, the game was able to get ",["$","strong",null,{"children":"~160 FPS"}]," on an average","\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-rendering-result-1.png","width":2560,"height":1600}],"\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-fps-1.png","width":196,"height":37}],"\n"]}],"\n",["$","li",null,{"children":["While by using the mid-level API the game was able to get ",["$","strong",null,{"children":"~200 FPS"}]," on an average.","\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-rendering-result-2.png","width":2560,"height":1600}],"\n",["$","$La",null,{"alt":"Stripe Website","className":"rounded-lg","src":"/content/ryuten-particle-fps-2.png","width":196,"height":37}],"\n"]}],"\n",["$","li",null,{"children":"Both the scenes are exactly the same with roughly 2.5k particles on the screen."}],"\n"]}],"\n",["$","h3",null,{"id":"conclusion","children":[[["$","a","link-conclusion",{"href":"#conclusion","className":"anchor"}]],"Conclusion"]}],"\n",["$","p",null,{"children":"Using the mid-level API surely does require more work, time and increases maintenance cost, but in return it provides you with more power and control. In this case, we were able to improve our particle rendering system by roughly 25%."}]]
9:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"About Me"}],["$","meta","3",{"name":"description","content":"How I optimised the rendering of particle element in ryuten.io"}],["$","meta","4",{"name":"robots","content":"index, follow"}],["$","meta","5",{"name":"googlebot","content":"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"}],["$","meta","6",{"property":"og:title","content":"Rendering particles in ryuten.io"}],["$","meta","7",{"property":"og:description","content":"How I optimised the rendering of particle element in ryuten.io"}],["$","meta","8",{"property":"og:url","content":"https://ryushar.github.io/blog/how-ryuten-renders-particles"}],["$","meta","9",{"property":"og:image","content":"https://ryushar.github.io/og?title=Rendering%20particles%20in%20ryuten.io"}],["$","meta","10",{"property":"og:type","content":"article"}],["$","meta","11",{"property":"article:published_time","content":"2024-04-12"}],["$","meta","12",{"name":"twitter:card","content":"summary_large_image"}],["$","meta","13",{"name":"twitter:title","content":"Rendering particles in ryuten.io"}],["$","meta","14",{"name":"twitter:description","content":"How I optimised the rendering of particle element in ryuten.io"}],["$","meta","15",{"name":"twitter:image","content":"https://ryushar.github.io/og?title=Rendering%20particles%20in%20ryuten.io"}]]
1:null
